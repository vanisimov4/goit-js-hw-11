{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.form');\nconst listImages = document.querySelector('ul.gallery');\n\nform.addEventListener('submit', handleFormSubmit);\n\nfunction handleFormSubmit(event) {\n  event.preventDefault();\n  const searchText = form.elements.text.value.trim();\n  if (searchText === '') {\n    console.log('Empty!');\n    return;\n  }\n  console.log('searchText');\n \n  listImages.innerHTML = '';\n\n  getPhotosByText(searchText)\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.error({\n          messageColor: 'white',\n          color: '#EF4040',\n          position: 'topRight',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      }\n      console.log(data.hits);\n      template(data.hits);\n\n      var lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      lightbox.refresh();\n    })\n    .catch(error => {\n      console.error(error);\n    });\n  // const options = {\n  //   method: \"GET\",\n  //   body: { API_KEY: \"42434197-39cd5bed035ab257afa598fe1\", q: \"roses\" },\n  // };\n  // fetch('https://pixabay.com/api/', options)\n  form.reset();\n}\n\nfunction getPhotosByText(searchText) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const API_KEY = '?key=42434197-39cd5bed035ab257afa598fe1';\n  const PARAMS =\n    '&q=' +\n    encodeURIComponent(`${searchText}`) +\n    '&image_type=photo' +\n    '&orientation=horizontal' +\n    '&safesearch=true';\n  const URL = BASE_URL + END_POINT + API_KEY + PARAMS;\n\n  return fetch(URL).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n\nfunction template(obj) {\n  const markup = obj\n    .map(\n      image => `<li class='gallery-item'>\n  <a class='gallery-link' href='${image.largeImageURL}'>\n    <img\n      class='gallery-image'\n      src='${image.webformatURL}'\n      alt='${image.tags}'\n    />\n  </a>\n    <ul class=\"gallery-item-info\">\n    <li class='gallery-item-info-categories'> \n            <div class='gallery-item-info-likes'>\n                    <h3 class=\"gallery-item-info-title\">Likes</h3>\n                <p class=\"gallery-item-info-text\">${image.likes}</p>\n                </div>\n    </li>\n    <li class='gallery-item-info-categories'> \n            <div class='gallery-item-info-views'>\n                    <h3 class=\"gallery-item-info-title\">Views</h3>\n                <p class=\"gallery-item-info-text\">${image.views}</p>\n                  </div>\n    </li>\n    <li class='gallery-item-info-categories'> \n            <div class='gallery-item-info-comments'>\n                    <h3 class=\"gallery-item-info-title\">Comments</h3>\n                <p class=\"gallery-item-info-text\">${image.comments}</p>\n                 </div>\n    </li>\n    <li class='gallery-item-info-categories'> \n            <div class='gallery-item-info-downloads'>\n                    <h3 class=\"gallery-item-info-title\">Downloads</h3>\n                <p class=\"gallery-item-info-text\">${image.downloads}</p>\n                 </div>\n    </li>\n    </ul>  \n</li>`\n    )\n    .join('');\n\n  listImages.insertAdjacentHTML('afterbegin', markup);\n\n  // return ``\n}\n\n// function render(obj) {\n  \n// }"],"names":["form","listImages","handleFormSubmit","event","searchText","getPhotosByText","data","iziToast","template","lightbox","SimpleLightbox","error","BASE_URL","END_POINT","API_KEY","PARAMS","URL","response","obj","markup","image"],"mappings":"6vBAKA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAa,SAAS,cAAc,YAAY,EAEtDD,EAAK,iBAAiB,SAAUE,CAAgB,EAEhD,SAASA,EAAiBC,EAAO,CAC/BA,EAAM,eAAc,EACpB,MAAMC,EAAaJ,EAAK,SAAS,KAAK,MAAM,OAC5C,GAAII,IAAe,GAAI,CACrB,QAAQ,IAAI,QAAQ,EACpB,MACD,CACD,QAAQ,IAAI,YAAY,EAExBH,EAAW,UAAY,GAEvBI,EAAgBD,CAAU,EACvB,KAAKE,GAAQ,CACRA,EAAK,KAAK,SAAW,GACvBC,EAAS,MAAM,CACb,aAAc,QACd,MAAO,UACP,SAAU,WACV,QACE,0EACZ,CAAS,EAEH,QAAQ,IAAID,EAAK,IAAI,EACrBE,EAASF,EAAK,IAAI,EAElB,IAAIG,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GACtB,CAAO,EACDD,EAAS,QAAO,CACtB,CAAK,EACA,MAAME,GAAS,CACd,QAAQ,MAAMA,CAAK,CACzB,CAAK,EAMHX,EAAK,MAAK,CACZ,CAEA,SAASK,EAAgBD,EAAY,CACnC,MAAMQ,EAAW,sBACXC,EAAY,QACZC,EAAU,0CACVC,EACJ,MACA,mBAAmB,GAAGX,CAAU,EAAE,EAClC,2DAGIY,EAAMJ,EAAWC,EAAYC,EAAUC,EAE7C,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAY,CACjC,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH,CAEA,SAAST,EAASU,EAAK,CACrB,MAAMC,EAASD,EACZ,IACCE,GAAS;AAAA,kCACmBA,EAAM,aAAa;AAAA;AAAA;AAAA,aAGxCA,EAAM,YAAY;AAAA,aAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAO6BA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAMXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAMXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAMdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,MAK9D,EACA,KAAK,EAAE,EAEVnB,EAAW,mBAAmB,aAAckB,CAAM,CAGpD"}